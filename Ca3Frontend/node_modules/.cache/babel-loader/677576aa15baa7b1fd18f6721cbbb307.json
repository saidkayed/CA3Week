{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\sidad\\\\Desktop\\\\JAVA PROG\\\\ReactSecur\\\\reactsec\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\sidad\\\\Desktop\\\\JAVA PROG\\\\ReactSecur\\\\reactsec\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\nvar _this = this;\n\nvar URL = \"http://localhost:8080/jwtbackend\";\n\nsetToken = function setToken(token) {\n  localStorage.setItem('jwtToken', token);\n};\n\ngetToken = function getToken() {\n  return localStorage.getItem('jwtToken');\n};\n\nloggedIn = function loggedIn() {\n  var loggedIn = _this.getToken() != null;\n  return loggedIn;\n};\n\nlogout = function logout() {\n  localStorage.removeItem(\"jwtToken\");\n};\n\nfunction handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({\n      status: res.status,\n      fullError: res.json()\n    });\n  }\n\n  return res.json();\n}\n\nvar ApiFacade =\n/*#__PURE__*/\nfunction () {\n  function ApiFacade() {\n    _classCallCheck(this, ApiFacade);\n  }\n\n  _createClass(ApiFacade, [{\n    key: \"makeOptions\",\n    value: function makeOptions(method, addToken, body) {\n      var opts = {\n        method: method,\n        headers: {\n          \"Content-type\": \"application/json\",\n          'Accept': 'application/json'\n        }\n      };\n\n      if (addToken && this.loggedIn()) {\n        opts.headers[\"x-access-token\"] = this.getToken();\n      }\n\n      if (body) {\n        opts.body = JSON.stringify(body);\n      }\n\n      return opts;\n    }\n  }]);\n\n  return ApiFacade;\n}();\n\nvar facade = new ApiFacade();\nexport default facade;","map":{"version":3,"sources":["C:\\Users\\sidad\\Desktop\\JAVA PROG\\ReactSecur\\reactsec\\src\\apiFacade.js"],"names":["URL","setToken","token","localStorage","setItem","getToken","getItem","loggedIn","logout","removeItem","handleHttpErrors","res","ok","Promise","reject","status","fullError","json","ApiFacade","method","addToken","body","opts","headers","JSON","stringify","facade"],"mappings":";;;;;AAAA,IAAMA,GAAG,GAAG,kCAAZ;;AAGAC,QAAQ,GAAG,kBAACC,KAAD,EAAW;AAClBC,EAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC;AACD,CAFH;;AAGEG,QAAQ,GAAG,oBAAM;AACf,SAAOF,YAAY,CAACG,OAAb,CAAqB,UAArB,CAAP;AACD,CAFD;;AAGAC,QAAQ,GAAG,oBAAM;AACf,MAAMA,QAAQ,GAAG,KAAI,CAACF,QAAL,MAAmB,IAApC;AACA,SAAOE,QAAP;AACD,CAHD;;AAIAC,MAAM,GAAG,kBAAM;AACbL,EAAAA,YAAY,CAACM,UAAb,CAAwB,UAAxB;AACD,CAFD;;AAIF,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AAC9B,MAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,WAAOC,OAAO,CAACC,MAAR,CAAe;AAAEC,MAAAA,MAAM,EAAEJ,GAAG,CAACI,MAAd;AAAsBC,MAAAA,SAAS,EAAEL,GAAG,CAACM,IAAJ;AAAjC,KAAf,CAAP;AACD;;AACD,SAAON,GAAG,CAACM,IAAJ,EAAP;AACA;;IAEKC,S;;;;;;;;;gCAEOC,M,EAAOC,Q,EAASC,I,EAAM;AAChC,UAAIC,IAAI,GAAG;AACTH,QAAAA,MAAM,EAAEA,MADC;AAETI,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAU;AAFH;AAFA,OAAX;;AAOA,UAAIH,QAAQ,IAAI,KAAKb,QAAL,EAAhB,EAAiC;AAC/Be,QAAAA,IAAI,CAACC,OAAL,CAAa,gBAAb,IAAiC,KAAKlB,QAAL,EAAjC;AACD;;AACD,UAAIgB,IAAJ,EAAU;AACRC,QAAAA,IAAI,CAACD,IAAL,GAAYG,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;AACD;;AACD,aAAOC,IAAP;AACD;;;;;;AAEF,IAAMI,MAAM,GAAG,IAAIR,SAAJ,EAAf;AACA,eAAeQ,MAAf","sourcesContent":["const URL = \"http://localhost:8080/jwtbackend\";\r\n\r\n\r\nsetToken = (token) => {\r\n    localStorage.setItem('jwtToken', token)\r\n  }\r\n  getToken = () => {\r\n    return localStorage.getItem('jwtToken')\r\n  }\r\n  loggedIn = () => {\r\n    const loggedIn = this.getToken() != null;\r\n    return loggedIn;\r\n  }\r\n  logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  }\r\n \r\nfunction handleHttpErrors(res) {\r\n if (!res.ok) {\r\n   return Promise.reject({ status: res.status, fullError: res.json() })\r\n }\r\n return res.json();\r\n}\r\n\r\nclass ApiFacade {\r\n    \r\n makeOptions(method,addToken,body) {\r\n   var opts = {\r\n     method: method,\r\n     headers: {\r\n       \"Content-type\": \"application/json\",\r\n       'Accept': 'application/json',\r\n     }\r\n   }\r\n   if (addToken && this.loggedIn()) {\r\n     opts.headers[\"x-access-token\"] = this.getToken();\r\n   }\r\n   if (body) {\r\n     opts.body = JSON.stringify(body);\r\n   }\r\n   return opts; \r\n }\r\n}\r\nconst facade = new ApiFacade();\r\nexport default facade;"]},"metadata":{},"sourceType":"module"}